<!DOCTYPE html>
<html>
<head>
<base target="_top">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HQ COMMAND CENTER v2.3 - PRODUCTION READY
   Unified Typography + Complete Dark Theme + Card Accents
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

:root {
  /* === FONT SCALE SYSTEM === */
  --font-scale: 1;
  --fs-2xs: calc(8px * var(--font-scale));
  --fs-xs: calc(9px * var(--font-scale));
  --fs-sm: calc(10px * var(--font-scale));
  --fs-base: calc(11px * var(--font-scale));
  --fs-md: calc(12px * var(--font-scale));
  --fs-lg: calc(14px * var(--font-scale));
  --fs-xl: calc(16px * var(--font-scale));
  --fs-2xl: calc(18px * var(--font-scale));

  /* === BRAND COLORS === */
  --hq-gold: #D4AF37;
  --hq-yellow: #F7CB4D;
  --hq-yellow-light: #FFF8E7;

  /* === CARD ACCENT COLORS === */
  --accent-ebay: #D4AF37;
  --accent-duplicates: #FF9800;
  --accent-live: #4CAF50;
  --accent-direct: #2196F3;
  --accent-fulfill: #9C27B0;
  --accent-arcade: #E91E63;

  /* === SURFACE COLORS === */
  --bg-primary: #FAFAFA;
  --bg-secondary: #F5F5F5;
  --bg-card: #FFFFFF;
  --bg-card-header: linear-gradient(180deg, #fafafa 0%, #f5f5f5 100%);
  --bg-card-header-hover: #FFF8E7;
  --bg-charcoal: #212121;
  --bg-terminal: #0a0a0a;
  --bg-stats: linear-gradient(180deg, #f8f8f8 0%, #ffffff 100%);

  /* === TEXT COLORS === */
  --text-primary: #212121;
  --text-secondary: #616161;
  --text-muted: #9E9E9E;
  --text-light: #FFFFFF;
  --text-terminal: #00ff00;

  /* === STATUS COLORS === */
  --status-pending: #D32F2F;
  --status-pending-bg: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%);
  --status-pending-border: #FFCDD2;
  --status-preparing: #F57C00;
  --status-preparing-bg: linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%);
  --status-preparing-border: #FFE082;
  --status-shipped: #388E3C;
  --status-shipped-bg: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
  --status-shipped-border: #A5D6A7;

  /* === BORDERS & SHADOWS === */
  --border: #E8E8E8;
  --border-hover: #D4AF37;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
  --shadow-gold: 0 4px 15px rgba(212,175,55,0.25);

  /* === ANIMATIONS === */
  --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --ease-spring: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DARK THEME - Complete Coverage
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
body.dark-theme {
  --bg-primary: #121212;
  --bg-secondary: #1A1A1A;
  --bg-card: #1E1E1E;
  --bg-card-header: linear-gradient(180deg, #252525 0%, #1E1E1E 100%);
  --bg-card-header-hover: #2A2A2A;
  --bg-charcoal: #0D0D0D;
  --bg-terminal: #050505;
  --bg-stats: linear-gradient(180deg, #1A1A1A 0%, #121212 100%);

  --text-primary: #E0E0E0;
  --text-secondary: #B0B0B0;
  --text-muted: #707070;

  --status-pending-bg: linear-gradient(135deg, #2D1A1A 0%, #3D2020 100%);
  --status-pending-border: #5D2020;
  --status-preparing-bg: linear-gradient(135deg, #2D2A1A 0%, #3D3520 100%);
  --status-preparing-border: #5D4520;
  --status-shipped-bg: linear-gradient(135deg, #1A2D1A 0%, #203D20 100%);
  --status-shipped-border: #205D20;

  --border: #2C2C2C;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.5);
}

body.dark-theme .header {
  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
}

body.dark-theme .card {
  background: var(--bg-card);
  border-color: var(--border);
}

body.dark-theme .card-header {
  background: var(--bg-card-header);
}

body.dark-theme .card-header:hover {
  background: var(--bg-card-header-hover);
}

body.dark-theme button {
  background: #2C2C2C;
  color: var(--text-primary);
  border-color: var(--border);
}

body.dark-theme button:hover {
  border-color: var(--hq-gold);
}

body.dark-theme .btn-primary {
  background: linear-gradient(135deg, #D4AF37 0%, #F7CB4D 100%);
  color: #000;
}

body.dark-theme .btn-danger {
  background: #3D2020;
  border-color: #5D2020;
  color: #FF6B6B;
}

body.dark-theme .btn-success {
  background: #1A3D1A;
  border-color: #205D20;
  color: #66BB6A;
}

body.dark-theme .btn-warning {
  background: #3D3520;
  border-color: #5D4520;
  color: #FFB74D;
}

body.dark-theme .btn-info {
  background: transparent;
  border-color: var(--border);
  color: var(--text-secondary);
}

body.dark-theme .btn-info:hover {
  background: #1A2D3D;
  border-color: #1565C0;
  color: #64B5F6;
}

body.dark-theme .btn-dark {
  background: #0D0D0D;
  color: var(--text-light);
}

body.dark-theme .toggle-row {
  background: var(--bg-secondary);
}

body.dark-theme .range-control {
  background: var(--bg-secondary);
}

body.dark-theme .color-legend {
  background: var(--bg-secondary);
}

body.dark-theme .cmd:hover,
body.dark-theme .cmd.active {
  background: #2A2A2A;
}

body.dark-theme .cmd-icon {
  background: var(--bg-secondary);
}

body.dark-theme .cmd:hover .cmd-icon,
body.dark-theme .cmd.active .cmd-icon {
  background: var(--hq-gold);
  color: #000;
}

body.dark-theme .palette-box {
  background: var(--bg-card);
}

body.dark-theme input[type="range"] {
  background: var(--border);
}

body.dark-theme input[type="range"]::-webkit-slider-track {
  background: var(--border);
}

/* === SCROLLBAR DARK THEME === */
body.dark-theme #modules::-webkit-scrollbar-thumb {
  background: #444;
}

body.dark-theme #modules::-webkit-scrollbar-thumb:hover {
  background: var(--hq-gold);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BASE RESET & BODY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  font-size: var(--fs-base);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMPACT HEADER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.header {
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  padding: 8px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
  border-bottom: 2px solid var(--hq-gold);
  min-height: 52px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.brand-container {
  display: flex;
  gap: 8px;
  align-items: center;
}

.brand-logo-text {
  width: 36px;
  height: 36px;
  border-radius: 6px;
  background: linear-gradient(135deg, #D4AF37 0%, #F7CB4D 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: var(--fs-xl);
  color: #000;
  letter-spacing: -1px;
  border: 2px solid #000;
  box-shadow: 0 2px 8px rgba(212, 175, 55, 0.4);
}

.brand-info {
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.brand-info h1 {
  font-size: var(--fs-lg);
  margin: 0;
  color: var(--hq-gold);
  letter-spacing: 1.2px;
  font-weight: 700;
}

.brand-clock {
  font-family: 'Courier New', monospace;
  font-size: var(--fs-lg);
  font-weight: 700;
  color: var(--hq-yellow);
  letter-spacing: 0.5px;
}

.system-status {
  display: flex;
  align-items: center;
  gap: 3px;
  margin-top: 1px;
}

.pulse-dot {
  width: 6px;
  height: 6px;
  background-color: #4CAF50;
  border-radius: 50%;
  animation: pulse-green 2s infinite;
}

@keyframes pulse-green {
  0%, 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
  50% { box-shadow: 0 0 0 3px rgba(76, 175, 80, 0); }
}

.pulse-text {
  font-size: var(--fs-xs);
  color: #4CAF50;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.top-controls {
  display: flex;
  gap: 5px;
}

.ctrl-btn {
  cursor: pointer;
  padding: 5px 7px;
  border-radius: 4px;
  background: rgba(255,255,255,0.08);
  font-size: var(--fs-md);
  transition: all 0.2s;
  position: relative;
}

.ctrl-btn:hover {
  background: var(--hq-gold);
  color: #000;
  transform: scale(1.05);
}

.ctrl-btn.muted { opacity: 0.5; }

.ctrl-btn .badge {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  background: var(--status-pending);
  color: white;
  font-size: var(--fs-xs);
  font-weight: 700;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  animation: badge-pulse 1.5s infinite;
}

@keyframes badge-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMPACT STATUS COUNTERS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.quick-stats {
  display: flex;
  gap: 4px;
  padding: 6px 8px;
  background: var(--bg-stats);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.stat-pill {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 5px 4px;
  border-radius: 8px;
  cursor: default;
  user-select: none;
  transition: all 0.3s var(--ease-out);
  position: relative;
  overflow: hidden;
}

.stat-pill::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  border-radius: 8px 8px 0 0;
}

.stat-pill.pending {
  background: var(--status-pending-bg);
  border: 1px solid var(--status-pending-border);
}
.stat-pill.pending::before { background: var(--status-pending); }
.stat-pill.pending .stat-count { color: var(--status-pending); }

.stat-pill.pending.has-items {
  animation: pulse-red 1.5s infinite;
}

@keyframes pulse-red {
  0%, 100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.4); }
  50% { box-shadow: 0 0 8px 2px rgba(211, 47, 47, 0.3); }
}

.stat-pill.preparing {
  background: var(--status-preparing-bg);
  border: 1px solid var(--status-preparing-border);
}
.stat-pill.preparing::before { background: var(--status-preparing); }
.stat-pill.preparing .stat-count { color: #E65100; }

.stat-pill.shipped {
  background: var(--status-shipped-bg);
  border: 1px solid var(--status-shipped-border);
}
.stat-pill.shipped::before { background: var(--status-shipped); }
.stat-pill.shipped .stat-count { color: var(--status-shipped); }

.stat-label {
  font-size: var(--fs-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: var(--text-muted);
  margin-bottom: 1px;
}

.stat-count {
  font-size: var(--fs-xl);
  font-weight: 800;
  line-height: 1;
}

.stat-icon {
  font-size: var(--fs-base);
  margin-top: 1px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TERMINAL-STYLE STATUS BAR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.status-bar {
  padding: 5px 10px;
  background: var(--bg-terminal);
  flex-shrink: 0;
  border-bottom: 1px solid #1a3a1a;
  position: relative;
}

#status {
  font-family: 'Courier New', 'Consolas', monospace;
  font-size: var(--fs-base);
  font-weight: 500;
  color: var(--text-terminal);
  padding: 6px 10px;
  background: transparent;
  border: 1px solid #1a3a1a;
  border-radius: 4px;
  text-align: left;
  position: relative;
  overflow: hidden;
  text-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
  min-height: 28px;
  display: flex;
  align-items: center;
}

#status::before {
  content: '>';
  margin-right: 6px;
  color: var(--hq-gold);
  font-weight: bold;
}

#status.running {
  color: #00bfff;
  text-shadow: 0 0 5px rgba(0, 191, 255, 0.5);
  border-color: #0a2a3a;
}

#status.running::after {
  content: '';
  display: inline-block;
  width: 6px;
  height: 12px;
  background: #00bfff;
  margin-left: 6px;
  animation: blink 0.7s infinite;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

#status.success {
  color: #00ff00;
  text-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
  border-color: #1a3a1a;
}

#status.error {
  color: #ff4444;
  text-shadow: 0 0 5px rgba(255, 68, 68, 0.5);
  border-color: #3a1a1a;
}

#status.syncing {
  color: #ffaa00;
  text-shadow: 0 0 5px rgba(255, 170, 0, 0.5);
  border-color: #3a2a0a;
}

.status-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    0deg,
    rgba(0, 0, 0, 0.05),
    rgba(0, 0, 0, 0.05) 1px,
    transparent 1px,
    transparent 2px
  );
  pointer-events: none;
  opacity: 0.4;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODULES AREA
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#modules {
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex-grow: 1;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: #CCCCCC transparent;
}

#modules::-webkit-scrollbar { width: 4px; }
#modules::-webkit-scrollbar-track { background: transparent; }
#modules::-webkit-scrollbar-thumb { background: #CCCCCC; border-radius: 2px; }
#modules::-webkit-scrollbar-thumb:hover { background: var(--hq-gold); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARDS - With Category Color Accents
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  overflow: hidden;
  transition: all 0.3s var(--ease-out);
  box-shadow: var(--shadow-sm);
  flex-shrink: 0;
}

.card:not(.collapsed) {
  border-left: 3px solid var(--card-accent, var(--hq-gold));
  box-shadow: var(--shadow-md);
}

.card:hover {
  border-color: var(--border-hover);
  box-shadow: var(--shadow-md);
}

/* === CARD ACCENT COLORS === */
.card[data-id="ebay"] { --card-accent: var(--accent-ebay); }
.card[data-id="duplicates"] { --card-accent: var(--accent-duplicates); }
.card[data-id="live"] { --card-accent: var(--accent-live); }
.card[data-id="direct"] { --card-accent: var(--accent-direct); }
.card[data-id="fulfill"] { --card-accent: var(--accent-fulfill); }
.card[data-id="arcade"] { --card-accent: var(--accent-arcade); }

/* === CARD ICON ACCENT COLORS === */
.card[data-id="ebay"] .card-icon { background: rgba(212, 175, 55, 0.15); }
.card[data-id="ebay"]:hover .card-icon { background: rgba(212, 175, 55, 0.3); }

.card[data-id="duplicates"] .card-icon { background: rgba(255, 152, 0, 0.15); }
.card[data-id="duplicates"]:hover .card-icon { background: rgba(255, 152, 0, 0.3); }

.card[data-id="live"] .card-icon { background: rgba(76, 175, 80, 0.15); }
.card[data-id="live"]:hover .card-icon { background: rgba(76, 175, 80, 0.3); }

.card[data-id="direct"] .card-icon { background: rgba(33, 150, 243, 0.15); }
.card[data-id="direct"]:hover .card-icon { background: rgba(33, 150, 243, 0.3); }

.card[data-id="fulfill"] .card-icon { background: rgba(156, 39, 176, 0.15); }
.card[data-id="fulfill"]:hover .card-icon { background: rgba(156, 39, 176, 0.3); }

.card[data-id="arcade"] .card-icon { background: rgba(233, 30, 99, 0.15); }
.card[data-id="arcade"]:hover .card-icon { background: rgba(233, 30, 99, 0.3); }

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  background: var(--bg-card-header);
  cursor: pointer;
  transition: background 0.2s ease;
  user-select: none;
}

.card-header:hover {
  background: var(--bg-card-header-hover);
}

.card-title {
  display: flex;
  align-items: center;
  gap: 7px;
}

.card-icon {
  width: 24px;
  height: 24px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--fs-md);
  transition: all 0.3s var(--ease-out);
}

.card-title h3 {
  font-size: var(--fs-md);
  font-weight: 600;
  color: var(--text-primary);
}

.card-toggle {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  font-size: var(--fs-base);
  transition: transform 0.3s var(--ease-out);
}

.card.collapsed .card-toggle { transform: rotate(-90deg); }

.card-body {
  padding: 10px;
  border-top: 1px solid var(--border);
  max-height: 800px;
  opacity: 1;
  transition: max-height 0.4s ease, opacity 0.3s ease, padding 0.3s ease;
  overflow: hidden;
}

.card.collapsed .card-body {
  max-height: 0;
  opacity: 0;
  padding-top: 0;
  padding-bottom: 0;
  border-top: 1px solid transparent;
  pointer-events: none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UI ELEMENTS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toggle-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 7px 8px;
  background: var(--bg-primary);
  border-radius: 5px;
  margin-bottom: 6px;
}

.toggle-label {
  font-size: var(--fs-base);
  font-weight: 600;
  color: var(--text-primary);
}

.switch {
  width: 34px;
  height: 18px;
  background: var(--border);
  border-radius: 9px;
  position: relative;
  cursor: pointer;
  transition: background 0.3s ease;
}

.switch::after {
  content: '';
  position: absolute;
  width: 13px;
  height: 13px;
  background: white;
  border-radius: 50%;
  top: 2.5px;
  left: 2.5px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.15);
  transition: transform 0.3s var(--ease-spring);
}

.switch.on { background: var(--status-shipped); }
.switch.on::after { transform: translateX(16px); }

/* BUTTONS */
button {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border: 1px solid var(--border);
  border-radius: 5px;
  font-size: var(--fs-base);
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  background: var(--bg-card);
  color: var(--text-primary);
  transition: all 0.2s var(--ease-out);
  outline: none;
}

button:hover {
  border-color: var(--hq-gold);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

button:active { transform: translateY(0) scale(0.98); }
button:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }
button:first-child { margin-top: 0; }

.btn-primary {
  background: linear-gradient(135deg, #D4AF37 0%, #F7CB4D 100%);
  border: none;
  color: #000;
  box-shadow: 0 2px 5px rgba(212, 175, 55, 0.3);
}

.btn-danger { background: #FFEBEE; border-color: #FFCDD2; color: var(--status-pending); }
.btn-success { background: #E8F5E9; border-color: #C8E6C9; color: var(--status-shipped); }
.btn-dark { background: var(--bg-charcoal); border: none; color: var(--text-light); }
.btn-warning { background: #FFF3E0; border-color: #FFE0B2; color: #E65100; }
.btn-info { background: transparent; border: 1px solid var(--border); color: var(--text-secondary); }
.btn-info:hover { background: #E3F2FD; border-color: #1565C0; color: #1565C0; }

.btn-sync {
  background: linear-gradient(135deg, #1976D2, #42A5F5);
  border: none;
  color: white;
}

.btn-sync:disabled { background: #90CAF9; }

.btn-sync .sync-spinner {
  display: none;
  width: 11px;
  height: 11px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

.btn-sync.syncing .sync-spinner { display: inline-block; }
.btn-sync.syncing .sync-icon { display: none; }

.btn-group { display: flex; gap: 5px; margin-top: 6px; }
.btn-group button { margin-top: 0; flex: 1; }
.btn-group:first-child { margin-top: 0; }

/* RANGE CONTROL */
.range-control {
  margin-top: 6px;
  padding: 6px;
  background: var(--bg-primary);
  border-radius: 5px;
}

.range-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 3px;
}

.range-label {
  font-size: var(--fs-sm);
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
}

.range-value {
  font-size: var(--fs-md);
  font-weight: 700;
  color: var(--hq-gold);
}

input[type="range"] {
  width: 100%;
  height: 5px;
  border-radius: 2.5px;
  background: var(--border);
  outline: none;
  -webkit-appearance: none;
  margin: 6px 0;
  cursor: pointer;
}

input[type="range"]::-webkit-slider-track {
  width: 100%;
  height: 5px;
  border-radius: 2.5px;
  background: var(--border);
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--hq-gold), var(--hq-yellow));
  cursor: grab;
  box-shadow: 0 2px 4px rgba(0,0,0,0.25);
  transition: transform 0.1s ease;
}

input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.1); }
input[type="range"]::-webkit-slider-thumb:active { cursor: grabbing; transform: scale(1.2); }

input[type="range"]::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--hq-gold), var(--hq-yellow));
  cursor: grab;
  box-shadow: 0 2px 4px rgba(0,0,0,0.25);
  border: none;
  transition: transform 0.1s ease;
}

input[type="range"]::-moz-range-thumb:hover { transform: scale(1.1); }
input[type="range"]::-moz-range-thumb:active { cursor: grabbing; transform: scale(1.2); }

.last-sync {
  font-size: var(--fs-xs);
  color: var(--text-muted);
  text-align: center;
  padding: 3px;
  margin-top: 3px;
}

/* COLOR LEGEND */
.color-legend {
  display: flex;
  gap: 8px;
  justify-content: center;
  margin-top: 6px;
  padding: 5px;
  background: var(--bg-primary);
  border-radius: 4px;
  font-size: var(--fs-2xs);
  color: var(--text-secondary);
}

.legend-item { display: flex; align-items: center; gap: 3px; }

.legend-color {
  width: 9px;
  height: 9px;
  border-radius: 2px;
  border: 1px solid rgba(0,0,0,0.1);
}

.legend-color.first { background: #dd7e6b; }
.legend-color.dupe { background: #e6b8af; }

.empty-hint {
  font-size: var(--fs-xs);
  color: var(--text-muted);
  text-align: center;
  padding: 3px;
  opacity: 0.85;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMMAND PALETTE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#palette {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(5px);
  display: none;
  align-items: flex-start;
  justify-content: center;
  padding-top: 40px;
  z-index: 2000;
}

#palette.active { display: flex; animation: fadeIn 0.2s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.palette-box {
  width: 92%;
  max-width: 360px;
  background: var(--bg-card);
  border-radius: 10px;
  overflow: hidden;
  box-shadow: var(--shadow-lg);
  border: 2px solid var(--hq-gold);
}

.palette-header {
  padding: 9px 12px;
  background: var(--bg-charcoal);
  border-bottom: 2px solid var(--hq-gold);
  display: flex;
  align-items: center;
  gap: 8px;
}

.palette-icon {
  font-size: var(--fs-lg);
  color: var(--hq-gold);
}

.palette-input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  font-size: var(--fs-md);
  color: var(--text-light);
  font-weight: 500;
}

.palette-input::placeholder {
  color: var(--text-muted);
}

.palette-hint {
  font-size: var(--fs-xs);
  font-weight: 700;
  color: #000;
  background: var(--hq-yellow);
  padding: 3px 7px;
  border-radius: 3px;
  letter-spacing: 0.5px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.card-header {
  cursor: pointer;
}

.drag-handle {
  cursor: grab !important;
  font-size: var(--fs-md);
  color: var(--text-muted);
  padding: 0 4px;
}

.drag-handle:active {
  cursor: grabbing !important;
}

.card.dragging {
  opacity: 0.5;
  border: 1px solid var(--hq-gold);
}

.card.drag-over {
  border: 2px dashed var(--hq-gold) !important;
}

#cmdList { max-height: 220px; overflow-y: auto; }

.cmd {
  padding: 7px 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  transition: all 0.15s;
  border-left: 3px solid transparent;
}

.cmd:hover, .cmd.active {
  background: var(--bg-card-header-hover);
  border-left-color: var(--hq-gold);
}

.cmd-icon {
  width: 22px;
  height: 22px;
  background: var(--bg-primary);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--fs-md);
}

.cmd:hover .cmd-icon, .cmd.active .cmd-icon { background: var(--hq-yellow); }

.cmd-text { font-size: var(--fs-base); font-weight: 500; color: var(--text-primary); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.footer {
  padding: 5px 10px;
  background: var(--bg-card);
  border-top: 1px solid var(--border);
  font-size: var(--fs-xs);
  color: var(--text-muted);
  text-align: center;
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.footer-time { font-weight: 600; color: var(--text-secondary); }
.footer-version { color: var(--text-muted); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOBILE RESPONSIVENESS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media screen and (max-width: 380px) {
  :root {
    --fs-2xs: calc(7px * var(--font-scale));
    --fs-xs: calc(8px * var(--font-scale));
    --fs-sm: calc(9px * var(--font-scale));
    --fs-base: calc(10px * var(--font-scale));
    --fs-md: calc(11px * var(--font-scale));
    --fs-lg: calc(12px * var(--font-scale));
    --fs-xl: calc(14px * var(--font-scale));
  }

  .header { padding: 7px 9px; }
  .brand-logo-text { width: 32px; height: 32px; }
  .stat-pill { padding: 4px 3px; }
  .card-header { padding: 7px 9px; }
  .card-body { padding: 9px; }
  .card-icon { width: 20px; height: 20px; }
  button { padding: 7px; }
  .btn-group { gap: 4px; }
}

@media screen and (max-height: 600px) {
  .header { padding: 6px 9px; min-height: 48px; }
  .brand-logo-text { width: 30px; height: 30px; }
  .quick-stats { padding: 5px 7px; }
  .stat-pill { padding: 4px 3px; }
  #modules { padding: 7px; gap: 7px; }
  .card-header { padding: 7px; }
  .card-body { padding: 8px; }
}

@media (hover: none) and (pointer: coarse) {
  button { padding: 10px; min-height: 40px; }
  .switch { width: 40px; height: 22px; }
  .switch::after { width: 17px; height: 17px; }
  .switch.on::after { transform: translateX(18px); }
  .ctrl-btn { padding: 7px 9px; }
}
</style>
</head>

<body>

<div class="header">
  <div class="brand-container">
    <div class="brand-logo-text">HQ</div>
    <div class="brand-info">
      <h1>COMMAND CENTER</h1>
      <div class="brand-clock" id="live-sidebar-clock">00:00:00 AM</div>
      <div class="system-status">
        <div class="pulse-dot"></div>
        <span class="pulse-text">Online</span>
      </div>
    </div>
  </div>
  <div class="top-controls">
    <div id="themeBtn" class="ctrl-btn" onclick="toggleTheme()" title="Toggle Theme">ğŸŒ™</div>
    <div id="muteBtn" class="ctrl-btn" onclick="toggleMute()" title="Toggle Sound">ğŸ””</div>
    <div class="ctrl-btn" onclick="openPalette()" title="Command Palette (Ctrl+K)">âŒ˜</div>
    <div id="fontBtn" class="ctrl-btn" onclick="toggleFontScale()" title="Text Size">ğŸ” </div>
  </div>
</div>

<div class="quick-stats">
  <div class="stat-pill pending" id="statPending">
    <span class="stat-label">Pending</span>
    <span class="stat-count" id="pendingCount">0</span>
    <span class="stat-icon">ğŸ”´</span>
  </div>
  <div class="stat-pill preparing" id="statPreparing">
    <span class="stat-label">Preparing</span>
    <span class="stat-count" id="preparingCount">0</span>
    <span class="stat-icon">ğŸŸ¡</span>
  </div>
  <div class="stat-pill shipped" id="statShipped">
    <span class="stat-label">Shipped</span>
    <span class="stat-count" id="shippedCount">0</span>
    <span class="stat-icon">ğŸŸ¢</span>
  </div>
</div>

<div class="status-bar">
  <div id="status">System ready_</div>
</div>

<div id="modules">

  <div class="card" data-id="ebay" draggable="true">
    <div class="card-header" onclick="toggleCollapse(this)">
      <div class="drag-handle" title="Drag to reorder">â˜°</div>
      <div class="card-title"><div class="card-icon">ğŸ›’</div><h3>eBay Orders</h3></div>
      <div class="card-toggle">â–¼</div>
    </div>
    <div class="card-body">
      <button class="btn-sync" id="syncBtn" onclick="triggerN8NSync()">
        <span class="sync-icon">ğŸ“¥</span><span class="sync-spinner"></span><span class="sync-text">Sync Orders</span>
      </button>
      <div class="last-sync" id="lastSync">Last sync: --</div>
      <div class="btn-group">
        <button onclick="run('runUpdateLocationsTableOne')"><span>ğŸ“</span> Locations</button>
        <button onclick="run('sortEbayTable')"><span>ğŸ”¤</span> Sort</button>
      </div>
      <button class="btn-danger" onclick="run('runDeleteEmptyRowsTableOne')"><span>ğŸ—‘</span> Cleanup Rows</button>
      <div class="range-control">
        <div class="range-header"><span class="range-label">Insert Rows</span><span class="range-value" id="r1">10</span></div>
        <input type="range" min="1" max="50" value="10" step="1" oninput="document.getElementById('r1').innerText=this.value">
        <button class="btn-success" onclick="run('addRowsTableOne', Number(document.getElementById('r1').innerText))"><span>â•</span> Add Rows</button>
      </div>
    </div>
  </div>

  <div class="card" data-id="duplicates" draggable="true">
    <div class="card-header" onclick="toggleCollapse(this)">
      <div class="drag-handle" title="Drag to reorder">â˜°</div>
      <div class="card-title"><div class="card-icon">ğŸ”</div><h3>Duplicate Check</h3></div>
      <div class="card-toggle">â–¼</div>
    </div>
    <div class="card-body">
      <div class="btn-group">
        <button class="btn-warning" onclick="run('highlightAllDuplicates')"><span>ğŸ”</span> Find</button>
        <button class="btn-info" onclick="run('clearAllDuplicateHighlights')"><span>âœ¨</span> Clear</button>
      </div>
      <div class="color-legend">
        <div class="legend-item"><div class="legend-color first"></div><span>1st occurrence</span></div>
        <div class="legend-item"><div class="legend-color dupe"></div><span>Duplicate</span></div>
      </div>
    </div>
  </div>

  <div class="card" data-id="stock-highlight" draggable="true">
    <div class="card-header" onclick="toggleCollapse(this)">
      <div class="drag-handle" title="Drag to reorder">â˜°</div>
      <div class="card-title"><div class="card-icon">ğŸ“Š</div><h3>Stock Highlight</h3></div>
      <div class="card-toggle">â–¼</div>
    </div>
    <div class="card-body">
      <div class="btn-group">
        <button class="btn-warning" onclick="run('setupHandConditionalFormatting')"><span>ğŸ”„</span> Repair Highlight</button>
      </div>
      <p style="font-size:11px;color:#888;margin-top:8px;">Re-applies low stock highlight rule on HAND column (values â‰¤ 20)</p>
    </div>
  </div>

  <div class="card" data-id="live" draggable="true">
    <div class="card-header" onclick="toggleCollapse(this)">
      <div class="drag-handle" title="Drag to reorder">â˜°</div>
      <div class="card-title"><div class="card-icon">âš¡</div><h3>Live Sync</h3></div>
      <div class="card-toggle">â–¼</div>
    </div>
    <div class="card-body">
      <div class="toggle-row">
        <span class="toggle-label">Auto-Sync Enabled</span>
        <div id="liveSwitch" class="switch" onclick="event.stopPropagation(); toggleLive()"></div>
      </div>
      <div class="toggle-row">
        <span class="toggle-label">Focus Mode (Hide Shipped)</span>
        <div id="focusSwitch" class="switch" onclick="toggleFocus()"></div>
      </div>
      <div class="btn-group">
        <button onclick="run('updateDailyDate')"><span>ğŸ“…</span> Clock</button>
        <button onclick="run('refreshProDashboard')"><span>ğŸ”„</span> Refresh</button>
      </div>
    </div>
  </div>

  <div class="card collapsed" data-id="direct" draggable="true">
    <div class="card-header" onclick="toggleCollapse(this)">
      <div class="drag-handle" title="Drag to reorder">â˜°</div>
      <div class="card-title"><div class="card-icon">ğŸ“¦</div><h3>Direct Orders</h3></div>
      <div class="card-toggle">â–¼</div>
    </div>
    <div class="card-body">
      <div class="btn-group">
        <button onclick="run('runUpdateLocationsTableTwo')"><span>ğŸ“</span> Locations</button>
        <button onclick="run('sortDirectTable')"><span>ğŸ”¤</span> Sort</button>
      </div>
      <button class="btn-danger" onclick="run('runDeleteEmptyRowsTableTwo')"><span>ğŸ—‘</span> Cleanup Rows</button>
      <div class="range-control">
        <div class="range-header"><span class="range-label">Insert Rows</span><span class="range-value" id="r2">10</span></div>
        <input type="range" min="1" max="50" value="10" step="1" oninput="document.getElementById('r2').innerText=this.value">
        <button class="btn-success" onclick="run('addRowsTableTwo', Number(document.getElementById('r2').innerText))"><span>â•</span> Add Rows</button>
      </div>
    </div>
  </div>

  <div class="card collapsed" data-id="fulfill" draggable="true">
    <div class="card-header" onclick="toggleCollapse(this)">
      <div class="drag-handle" title="Drag to reorder">â˜°</div>
      <div class="card-title"><div class="card-icon">ğŸš€</div><h3>Fulfillment</h3></div>
      <div class="card-toggle">â–¼</div>
    </div>
    <div class="card-body">
      <button class="btn-dark" onclick="run('markSelectedPreparing')"><span>ğŸ“¦</span> Mark Preparing</button>
      <button class="btn-primary" onclick="run('preparePrintSheet')"><span>ğŸ–¨</span> Print Pick List</button>
    </div>
  </div>

  <div class="card collapsed" data-id="arcade" draggable="true">
    <div class="card-header" onclick="toggleCollapse(this)">
      <div class="drag-handle" title="Drag to reorder">â˜°</div>
      <div class="card-title"><div class="card-icon">ğŸ®</div><h3>HQ Arcade</h3></div>
      <div class="card-toggle">â–¼</div>
    </div>
    <div class="card-body">
      <button class="btn-primary" onclick="openSnakeGame()"><span>ğŸ®</span> Launch Snake</button>
      <div class="empty-hint">Take a break! Beat the high score.</div>
    </div>
  </div>

</div>

<div class="footer">
  <span>Last activity: <span class="footer-time" id="lastActivity">--</span></span>
  <span class="footer-version">v2.3</span>
</div>

<div id="palette">
  <div class="palette-box">
    <div class="palette-header">
      <span class="palette-icon">âŒ˜</span>
      <input class="palette-input" id="cmdInput" placeholder="Search commands...">
      <span class="palette-hint">ESC</span>
    </div>
    <div id="cmdList"></div>
  </div>
</div>

<!-- Notification Sound (silent until played) -->
<audio id="notificationSound" preload="auto">
  <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJGrp5dvcWiFr7mtl3N0iaCvm5d4fI2jrpqMeIGMna+jlIJ+h5WqppuIgYeLnKWfk4eDiJCdoJmPhoyOlZuYkouNj5KWlZGNjpCRk5KQjo+QkZGQj4+PkJCPj4+PkJCQj4+Qj5CPkI+Pj5CPkI+Pj5CPkI+Qj5CPkI+Qj5CPkI+Qj5CPkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQ" type="audio/wav">
</audio>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HQ COMMAND CENTER v2.3 - JavaScript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const status = document.getElementById('status');
const statusMessages = [
  'Awaiting command_',
  'Systems operational_',
  'Ready for deployment_',
  'Standing by_'
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CORE FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function run(fn, param) {
  status.className = 'running';
  status.textContent = 'Processing..._';

  if (typeof google !== 'undefined' && google.script) {
    google.script.run
      .withSuccessHandler(function(result) {
        status.className = 'success';
        status.textContent = result || 'Complete_';
        updateLastActivity();
        refreshStats();
        setTimeout(function() {
          status.className = '';
          status.textContent = statusMessages[Math.floor(Math.random() * statusMessages.length)];
        }, 3000);
      })
      .withFailureHandler(function(err) {
        status.className = 'error';
        status.textContent = 'Error: ' + err.message;
      })
      [fn](param);
  }
}

function updateLastActivity() {
  var now = new Date();
  var time = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
  document.getElementById('lastActivity').textContent = time;
  localStorage.setItem('lastActivity', time);
}

// Restore last activity
var savedActivity = localStorage.getItem('lastActivity');
if (savedActivity) document.getElementById('lastActivity').textContent = savedActivity;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATS & NOTIFICATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var lastPendingCount = parseInt(localStorage.getItem('lastPendingCount')) || 0;
var newOrderCount = 0;
var isMuted = localStorage.getItem('proMuted') === 'true';

function refreshStats() {
  if (typeof google !== 'undefined' && google.script) {
    google.script.run
      .withSuccessHandler(function(stats) {
        var currentPending = parseInt(stats.pending) || 0;

        // Update display
        document.getElementById('pendingCount').textContent = stats.pending;
        document.getElementById('preparingCount').textContent = stats.preparing;
        document.getElementById('shippedCount').textContent = stats.shipped;

        // Pending animation
        var pendingPill = document.getElementById('statPending');
        if (currentPending > 0) {
          pendingPill.classList.add('has-items');
        } else {
          pendingPill.classList.remove('has-items');
        }

        // Check for new orders
        if (currentPending > lastPendingCount && lastPendingCount >= 0) {
          var newOrders = currentPending - lastPendingCount;
          newOrderCount += newOrders;

          // Play notification sound if not muted
          if (!isMuted) {
            playNotificationSound();
          }

          updateBadge();
        }

        // Save current count for next comparison
        lastPendingCount = currentPending;
        localStorage.setItem('lastPendingCount', currentPending);
      })
      .getOrderStats();
  }
}

function playNotificationSound() {
  try {
    // Create a simple beep using Web Audio API
    var audioContext = new (window.AudioContext || window.webkitAudioContext)();
    var oscillator = audioContext.createOscillator();
    var gainNode = audioContext.createGain();

    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);

    oscillator.frequency.value = 800; // Hz
    oscillator.type = 'sine';

    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.3);

    // Second beep
    setTimeout(function() {
      var osc2 = audioContext.createOscillator();
      var gain2 = audioContext.createGain();
      osc2.connect(gain2);
      gain2.connect(audioContext.destination);
      osc2.frequency.value = 1000;
      osc2.type = 'sine';
      gain2.gain.setValueAtTime(0.3, audioContext.currentTime);
      gain2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
      osc2.start(audioContext.currentTime);
      osc2.stop(audioContext.currentTime + 0.3);
    }, 150);
  } catch (e) {
    console.log('Audio notification not supported');
  }
}

function toggleMute() {
  isMuted = !isMuted;
  localStorage.setItem('proMuted', isMuted);
  updateMuteBtn();

  // Clear badge when unmuting (acknowledges notifications)
  if (!isMuted) {
    newOrderCount = 0;
    updateBadge();
  }
}

function updateMuteBtn() {
  var btn = document.getElementById('muteBtn');
  if (isMuted) {
    btn.classList.add('muted');
    btn.textContent = 'ğŸ”•';
  } else {
    btn.classList.remove('muted');
    btn.textContent = 'ğŸ””';
  }
}

function updateBadge() {
  var btn = document.getElementById('muteBtn');
  var existing = btn.querySelector('.badge');
  if (existing) existing.remove();

  if (newOrderCount > 0 && !isMuted) {
    var badge = document.createElement('span');
    badge.className = 'badge';
    badge.textContent = newOrderCount > 9 ? '9+' : newOrderCount;
    btn.appendChild(badge);
  }
}

updateMuteBtn();

// Initialize stats refresh
if (typeof google !== 'undefined') {
  refreshStats();
  setInterval(refreshStats, 30000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// N8N SYNC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var isSyncing = false;
var SYNC_COOLDOWN = 30000;

function triggerN8NSync() {
  var btn = document.getElementById('syncBtn');
  if (isSyncing) {
    status.className = 'error';
    status.textContent = 'Sync in progress..._';
    return;
  }
  isSyncing = true;
  btn.classList.add('syncing');
  btn.disabled = true;
  status.className = 'syncing';
  status.textContent = 'Connecting to eBay API..._';

  if (typeof google !== 'undefined' && google.script) {
    google.script.run
      .withSuccessHandler(function(result) {
        status.className = 'success';
        status.textContent = result || 'Sync complete_';
        updateLastSync();
        updateLastActivity();
        refreshStats();
        setTimeout(function() {
          btn.classList.remove('syncing');
          btn.disabled = false;
          isSyncing = false;
          status.className = '';
          status.textContent = 'System ready_';
        }, SYNC_COOLDOWN);
      })
      .withFailureHandler(function(err) {
        status.className = 'error';
        status.textContent = 'Sync failed: ' + err.message;
        btn.classList.remove('syncing');
        btn.disabled = false;
        isSyncing = false;
      })
      .triggerN8NWebhook();
  }
}

function updateLastSync() {
  var now = new Date();
  var time = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
  document.getElementById('lastSync').textContent = 'Last sync: ' + time;
  localStorage.setItem('lastSync', time);
}

var savedSync = localStorage.getItem('lastSync');
if (savedSync) document.getElementById('lastSync').textContent = 'Last sync: ' + savedSync;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CARD COLLAPSE & STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function toggleCollapse(header) {
  if (event && event.target.closest('.drag-handle')) return;
  var card = header.closest('.card');
  card.classList.toggle('collapsed');
  saveState();
}

function saveState() {
  var collapsed = Array.from(document.querySelectorAll('.card.collapsed')).map(function(c) {
    return c.dataset.id;
  });
  localStorage.setItem('proCollapsed', JSON.stringify(collapsed));
}

// Restore collapsed state
var savedCollapsed = localStorage.getItem('proCollapsed');
if (savedCollapsed) {
  JSON.parse(savedCollapsed).forEach(function(id) {
    var card = document.querySelector('[data-id="'+id+'"]');
    if (card) card.classList.add('collapsed');
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FONT SCALING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const FONT_SCALES = [0.9, 1, 1.15];
let fontScaleIndex = 1;

function applyFontScale(scale) {
  document.documentElement.style.setProperty('--font-scale', scale);
  localStorage.setItem('hqFontScale', scale);
}

function toggleFontScale() {
  fontScaleIndex = (fontScaleIndex + 1) % FONT_SCALES.length;
  applyFontScale(FONT_SCALES[fontScaleIndex]);
}

// Restore font scale
const savedScale = localStorage.getItem('hqFontScale');
if (savedScale) {
  applyFontScale(savedScale);
  fontScaleIndex = FONT_SCALES.indexOf(Number(savedScale));
  if (fontScaleIndex === -1) fontScaleIndex = 1;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TOGGLES (LIVE SYNC, FOCUS MODE)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function toggleLive() {
  var sw = document.getElementById('liveSwitch');
  sw.classList.toggle('on');
  var newState = sw.classList.contains('on') ? 'ON' : 'OFF';
  run('toggleLiveUpdate', newState);
  if (newState === 'ON') {
    setTimeout(function() { run('runUpdateLocationsTableOne'); }, 500);
  }
}

function toggleFocus() {
  var sw = document.getElementById('focusSwitch');
  sw.classList.toggle('on');
  var newState = sw.classList.contains('on') ? 'ON' : 'OFF';
  run('toggleFocusMode', newState);
}

// Restore live sync state
if (typeof google !== 'undefined') {
  google.script.run.withSuccessHandler(function(state) {
    var sw = document.getElementById('liveSwitch');
    if (state === 'ON') sw.classList.add('on');
  }).getLiveUpdateState();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COMMAND PALETTE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var palette = document.getElementById('palette');
var cmdInput = document.getElementById('cmdInput');
var cmdList = document.getElementById('cmdList');

var commands = [
  ['ğŸ“¥', 'Sync eBay Orders', 'triggerN8NWebhook'],
  ['ğŸ“', 'Update Locations (eBay)', 'runUpdateLocationsTableOne'],
  ['ğŸ“', 'Update Locations (Direct)', 'runUpdateLocationsTableTwo'],
  ['ğŸ”¤', 'Sort eBay Table', 'sortEbayTable'],
  ['ğŸ”¤', 'Sort Direct Table', 'sortDirectTable'],
  ['ğŸ”', 'Find Duplicates', 'highlightAllDuplicates'],
  ['âœ¨', 'Clear Highlights', 'clearAllDuplicateHighlights'],
  ['ğŸ—‘', 'Cleanup eBay Table', 'runDeleteEmptyRowsTableOne'],
  ['ğŸ—‘', 'Cleanup Direct Table', 'runDeleteEmptyRowsTableTwo'],
  ['ğŸ–¨', 'Print Pick List', 'preparePrintSheet'],
  ['ğŸ“¦', 'Mark as Preparing', 'markSelectedPreparing'],
  ['ğŸ“…', 'Update Clock', 'updateDailyDate'],
  ['ğŸ”„', 'Refresh Dashboard', 'refreshProDashboard'],
  ['ğŸ®', 'Launch Snake Game', 'openSnakeGame']
];

var cmdIndex = 0;

function openPalette() {
  palette.classList.add('active');
  cmdInput.focus();
  cmdInput.value = '';
  renderCommands('');
}

function closePalette() {
  palette.classList.remove('active');
}

// Keyboard handling
document.addEventListener('keydown', function(e) {
  // Open palette with Ctrl+K / Cmd+K
  if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
    e.preventDefault();
    openPalette();
  }

  // Close palette with ESC
  if (e.key === 'Escape') {
    if (palette.classList.contains('active')) {
      e.preventDefault();
      closePalette();
    }
  }

  // Navigate palette with arrows
  if (palette.classList.contains('active')) {
    if (e.key === 'ArrowDown') {
      e.preventDefault();
      cmdIndex++;
      highlightCmd();
    }
    if (e.key === 'ArrowUp') {
      e.preventDefault();
      cmdIndex--;
      highlightCmd();
    }
    if (e.key === 'Enter') {
      e.preventDefault();
      var items = cmdList.children;
      if (items[cmdIndex]) items[cmdIndex].click();
    }
  }
});

// Close palette when clicking backdrop
palette.addEventListener('click', function(e) {
  if (e.target === palette) closePalette();
});

cmdInput.addEventListener('input', function() {
  renderCommands(cmdInput.value);
});

function renderCommands(query) {
  cmdList.innerHTML = '';
  cmdIndex = 0;
  var filtered = commands.filter(function(c) {
    return c[1].toLowerCase().indexOf(query.toLowerCase()) !== -1;
  });
  filtered.forEach(function(cmd, i) {
    var div = document.createElement('div');
    div.className = 'cmd' + (i === 0 ? ' active' : '');
    div.innerHTML = '<div class="cmd-icon">' + cmd[0] + '</div><span class="cmd-text">' + cmd[1] + '</span>';
    div.onclick = function() {
      closePalette();
      if (cmd[2] === 'openSnakeGame') {
        openSnakeGame();
      } else {
        run(cmd[2]);
      }
    };
    cmdList.appendChild(div);
  });
}

function highlightCmd() {
  var items = cmdList.children;
  cmdIndex = Math.max(0, Math.min(cmdIndex, items.length - 1));
  Array.from(items).forEach(function(c, i) {
    c.classList.toggle('active', i === cmdIndex);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LIVE CLOCK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function startLiveClock() {
  const clockElement = document.getElementById('live-sidebar-clock');

  function updateClock() {
    const now = new Date();
    const houstonTime = now.toLocaleTimeString('en-US', {
      timeZone: 'America/Chicago',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      hour12: true
    });
    clockElement.textContent = houstonTime;
  }

  updateClock();
  setInterval(updateClock, 1000);
}

startLiveClock();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SNAKE GAME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function openSnakeGame() {
  if (typeof google !== 'undefined' && google.script) {
    google.script.run.showSnakeSidebar();
  } else {
    alert('Game requires Apps Script environment');
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DARK THEME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var isDark = localStorage.getItem('hq-theme') === 'dark';

function toggleTheme() {
  isDark = !isDark;
  document.body.classList.toggle('dark-theme', isDark);
  localStorage.setItem('hq-theme', isDark ? 'dark' : 'light');
  document.getElementById('themeBtn').textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
}

// Restore theme
if (isDark) {
  document.body.classList.add('dark-theme');
  document.getElementById('themeBtn').textContent = 'â˜€ï¸';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CARD DRAG & DROP REORDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const moduleContainer = document.getElementById('modules');
let draggedCard = null;
let isHandleClicked = false;

function restoreCardOrder() {
  const saved = localStorage.getItem('cardOrder');
  if (!saved) return;

  const order = JSON.parse(saved);
  const cards = {};
  document.querySelectorAll('.card').forEach(c => {
    cards[c.dataset.id] = c;
  });

  order.forEach(id => {
    if (cards[id]) moduleContainer.appendChild(cards[id]);
  });
}

function saveCardOrder() {
  const order = Array.from(document.querySelectorAll('.card'))
    .map(card => card.dataset.id);
  localStorage.setItem('cardOrder', JSON.stringify(order));
}

restoreCardOrder();

moduleContainer.addEventListener('mousedown', (e) => {
  isHandleClicked = !!e.target.closest('.drag-handle');
});

moduleContainer.addEventListener('dragstart', (e) => {
  const card = e.target.closest('.card');

  if (isHandleClicked && card) {
    draggedCard = card;
    card.classList.add('dragging');
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text/plain', card.dataset.id);
  } else {
    e.preventDefault();
  }
});

moduleContainer.addEventListener('dragend', () => {
  if (draggedCard) draggedCard.classList.remove('dragging');
  document.querySelectorAll('.card').forEach(c => c.classList.remove('drag-over'));
  draggedCard = null;
  isHandleClicked = false;
  saveCardOrder();
});

moduleContainer.addEventListener('dragover', (e) => {
  e.preventDefault();
  const overCard = e.target.closest('.card');
  if (overCard && overCard !== draggedCard) {
    overCard.classList.add('drag-over');
  }
});

moduleContainer.addEventListener('dragleave', (e) => {
  const overCard = e.target.closest('.card');
  if (overCard) overCard.classList.remove('drag-over');
});

moduleContainer.addEventListener('drop', (e) => {
  e.preventDefault();
  const dropTarget = e.target.closest('.card');
  if (!draggedCard || !dropTarget || draggedCard === dropTarget) return;

  dropTarget.classList.remove('drag-over');

  const rect = dropTarget.getBoundingClientRect();
  const midpoint = (e.clientY - rect.top) / (rect.bottom - rect.top);

  if (midpoint > 0.5) {
    moduleContainer.insertBefore(draggedCard, dropTarget.nextSibling);
  } else {
    moduleContainer.insertBefore(draggedCard, dropTarget);
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STARTUP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

setTimeout(function() {
  status.textContent = 'HQ Command Center v2.3 online_';
  setTimeout(function() {
    status.textContent = 'System ready_';
  }, 2000);
}, 500);

</script>

</body>
</html>
